import{k as x,g as R,c as $,q as U,d as G}from"./index.7ec48b1e.js";import{d as j,aB as q,n as J,c as y,J as M,o as i,f as k,b as l,w as n,v as _,N as m,y as p,k as c,F as P,z as Q,u as a,x as D,b1 as W,P as H,Q as K,R as O,aE as X,b4 as Y,G as Z,p as ee,j as te,a1 as oe}from"./.pnpm.b1628590.js";const se=u=>(ee("data-v-ffdc0e36"),u=u(),te(),u),le={class:"base-column-setting"},ne={class:"base-column-content flex"},ae={class:"base-column-list flex-auto"},ce={class:"base-column-title pl15"},ue={class:"padding15 border-box"},ie={class:"base-column-choose"},de=se(()=>c("div",{class:"base-column-title pl15"},"\u5DF2\u9009\u5B57\u6BB5",-1)),re={class:"pt5 pb5 border-box base-column-choose-content"},me={key:0,class:"base-column-choose-item flex-row-center pl10 pr10"},_e=["title"],pe={class:"base-column-setting-tip"},he=j({__name:"base-column-setting",props:{tableColumns:{type:Array,default:()=>[]},filterColumns:{type:Array,default:()=>[]},showTable:{type:Boolean,default:!0},showFilter:{type:Boolean,default:!0}},emits:["update:tableColumns","update:filterColumns","columns-change"],setup(u,{emit:h}){const C=u,{proxy:w}=oe(),e=q({dialogType:0,isIndeterminate:!1,checkAll:!0,checkedList:[],checkColumnList:[]}),f=J(),F=y(()=>e.dialogType===0?"\u81EA\u5B9A\u4E49\u5217\u8868\u5B57\u6BB5":"\u81EA\u5B9A\u4E49\u7B5B\u9009\u5B57\u6BB5"),d=y(()=>e.dialogType===0?C.tableColumns:C.filterColumns),g=o=>{e.dialogType=o,v(),a(f).showDialog()},L=o=>{e.checkedList=o?a(d).map(t=>t.fieldName):[],e.isIndeterminate=!1},b=o=>{const t=o.length;e.checkAll=t===a(d).length,e.isIndeterminate=t>0&&t<a(d).length},A=o=>{e.checkedList=e.checkedList.filter(t=>t!==o),b(e.checkedList)},V=()=>{if(e.checkedList.length===0){w.$messageWarning("\u8BF7\u81F3\u5C11\u52FE\u9009\u4E00\u9879\u518D\u8FDB\u884C\u8BE5\u64CD\u4F5C");return}e.dialogType===0?h("update:tableColumns",e.checkColumnList):h("update:filterColumns",e.checkColumnList),h("columns-change",e.checkColumnList.filter(o=>x(o.active)||o.active)),a(f).hideDialog()},v=()=>{e.checkedList=a(d).filter(o=>x(o.active)||o.active).map(o=>o.fieldName)};return M(()=>e.checkedList,()=>{const o=R(a(d));e.checkColumnList=o.map(t=>(t.active=e.checkedList.includes(t.fieldName),t))}),(o,t)=>{const r=$,B=H,N=K,T=O,E=X,I=Y,S=Z,z=U;return i(),k("div",le,[l(T,{trigger:"click"},{dropdown:n(()=>[l(N,null,{default:n(()=>[u.showTable?(i(),_(B,{key:0,onClick:t[0]||(t[0]=s=>g(0))},{default:n(()=>[l(r,{"svg-name":"column",size:14}),m("\u81EA\u5B9A\u4E49\u5217\u8868\u5B57\u6BB5 ")]),_:1})):p("",!0),u.showFilter?(i(),_(B,{key:1,onClick:t[1]||(t[1]=s=>g(1))},{default:n(()=>[l(r,{"svg-name":"filter",size:16}),m("\u81EA\u5B9A\u4E49\u7B5B\u9009 ")]),_:1})):p("",!0)]),_:1})]),default:n(()=>[l(r,{"el-name":"setting",class:"pointer base-icon-setting",size:18,hover:""})]),_:1}),l(z,{title:a(F),ref_key:"baseDialogRef",ref:f,width:"870px",saveText:"\u4FDD \u5B58",cancelText:"\u91CD \u7F6E",closeFun:v,onSave:V},{default:n(()=>[c("div",ne,[c("div",ae,[c("div",ce,[l(E,{modelValue:e.checkAll,"onUpdate:modelValue":t[2]||(t[2]=s=>e.checkAll=s),indeterminate:e.isIndeterminate,onChange:L},{default:n(()=>[m(" \u5168\u90E8\u5B57\u6BB5 ")]),_:1},8,["modelValue","indeterminate"])]),c("div",ue,[l(I,{modelValue:e.checkedList,"onUpdate:modelValue":t[3]||(t[3]=s=>e.checkedList=s),onChange:b},{default:n(()=>[(i(!0),k(P,null,Q(a(d),s=>(i(),_(E,{key:s.fieldName,label:s.fieldName,class:"base-column-checkbox",title:s.fieldDesc},{default:n(()=>[m(D(s.fieldDesc),1)]),_:2},1032,["label","title"]))),128))]),_:1},8,["modelValue"])])]),c("div",ie,[de,c("div",re,[l(S,null,{default:n(()=>[l(a(W),{modelValue:e.checkColumnList,"onUpdate:modelValue":t[4]||(t[4]=s=>e.checkColumnList=s),animation:100,"item-key":"fieldName",forceFallback:!0,handle:".move"},{item:n(({element:s})=>[s.active?(i(),k("div",me,[s.fixed?p("",!0):(i(),_(r,{key:0,"el-name":"rank",size:16,class:"move mr5",hover:""})),c("div",{class:"text-hidden w100",title:s.fieldDesc},D(s.fieldDesc),9,_e),l(r,{"el-name":"close",size:14,class:"pointer",hover:"",onClick:fe=>A(s.fieldName)},null,8,["onClick"])])):p("",!0)]),_:1},8,["modelValue"])]),_:1})])])]),c("div",pe,[m(" \u6CE8\uFF1A\u62D6\u52A8 "),l(r,{"el-name":"rank",size:14,class:"ml5 mr5"}),m(" \u56FE\u6807\u53EF\u8C03\u6574\u987A\u5E8F ")])]),_:1},8,["title"])])}}});const ge=G(he,[["__scopeId","data-v-ffdc0e36"]]);export{ge as _};
