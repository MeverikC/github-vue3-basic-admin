import{d as R,r as x,b as C,a1 as L,x as d,g as i,aT as H,cc as P,V as W,o as $,c as O,e as w,C as D,E as S,a6 as E}from"./index.c50eeaf2.js";let F=0;const b="webkit moz ms o".split(" ");let s,l;const N=typeof window>"u";if(N)s=function(){},l=function(){};else{s=window.requestAnimationFrame,l=window.cancelAnimationFrame;let r;for(let a=0;a<b.length&&!(!!s&&!!l);a++)r=b[a],s=s||window[r+"RequestAnimationFrame"],l=l||window[r+"CancelAnimationFrame"]||window[r+"CancelRequestAnimationFrame"];(!s||!l)&&(s=function(a){const o=new Date().getTime(),c=Math.max(0,16-(o-F)),f=window.setTimeout(()=>{a(o+c)},c);return F=o+c,f},l=function(a){window.clearTimeout(a)})}const j={data:{type:Array,default:()=>[]},options:{type:Object,default:()=>{}},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"300px"}},z={autoPlay:!0,switchDelay:400,hoverStop:!0,step:1,singleHeight:0,waitTime:1e3},V=["innerHTML"],G=R({__name:"base-seam-scroll",props:j,setup(r,{expose:a}){const o=r,c=x(null),f=x(null),e=C({top:0,autoPlay:!1,delay:0,copyHtml:"",isHover:!1,reqFrame:null,singleWaitTime:null});L(()=>{g()});const p=d(()=>Object.assign({},z,o.options)),M=d(()=>i(p).autoPlay?"ease-in":"linear"),y=d(()=>{const{hoverStop:t,autoPlay:n}=i(p);return t&&n&&o.data.length>1}),_=d(()=>{const{width:t,height:n}=o;return{width:H(t)?t:`${t}px`,height:H(n)?n:`${n}px`}}),A=d(()=>({transform:`translateY(${e.top}px)`,transition:`all ${M.value} ${e.delay}ms`,overflow:"hidden"})),g=()=>{var m;const{autoPlay:t,switchDelay:n}=i(p);e.delay=t?0:n,t&&(o.data.length>1?(e.copyHtml=(m=i(f))==null?void 0:m.innerHTML,P(()=>{u()},0)):(e.top=0,h()))},u=()=>{e.isHover||(h(),e.reqFrame=s(()=>{var v;const t=(v=i(c))==null?void 0:v.offsetHeight,{step:n,singleHeight:m,waitTime:q}=i(p);Math.abs(e.top)>=t/2&&(e.top=0),e.top-=n,e.singleWaitTime&&clearTimeout(e.singleWaitTime),m&&Math.abs(e.top)%m<n?e.singleWaitTime=setTimeout(()=>{u()},q):u()}))},B=()=>{i(y)&&(e.isHover=!1,u())},k=()=>{i(y)&&(e.isHover=!0,e.singleWaitTime&&clearTimeout(e.singleWaitTime),h())},h=()=>{l(e.reqFrame||"")},T=()=>{h(),g()};return W(()=>o.data,()=>{E(()=>{T()})},{deep:!0}),a({reset:T}),(t,n)=>($(),O("div",{style:S(i(_)),class:"hidden"},[w("div",{ref_key:"realBoxRef",ref:c,style:S(i(A)),onMouseenter:k,onMouseleave:B},[w("div",{ref_key:"slotListRef",ref:f,class:"hidden"},[D(t.$slots,"default")],512),w("div",{innerHTML:e.copyHtml,class:"hidden"},null,8,V)],36)],4))}});export{G as _};
