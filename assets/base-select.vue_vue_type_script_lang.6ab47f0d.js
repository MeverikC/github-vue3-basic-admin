import{d as F,a2 as x,n as B,c as $,aQ as k,u as c,$ as M,b,X as j,aX as I,aY as R,aZ as O,i as U}from"./.pnpm.b1628590.js";import{o as X,h as H,n as S,p as Q}from"./index.c8e2dcea.js";const Y={modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},multiple:{type:Boolean,default:!1},multipleLimit:{type:Number,default:0},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"\u8BF7\u9009\u62E9"},clearable:{type:Boolean,default:!0},filterable:{type:Boolean,default:!1},valueKey:{type:String,default:"value"},remote:{type:Boolean,default:!1},allowCreate:{type:Boolean,default:!1}},T={labelInValue:{type:Boolean,default:!1},text:{type:Boolean,default:!1},labelKey:{type:String,default:"label"},options:{type:Array,default:()=>[]},valueObject:{type:Boolean,default:!1},maxTagCount:{type:Number,default:2},maxTagPlaceholder:{type:Function},modelLabel:{type:[Array,String,Number,Boolean,Object],default:void 0},api:{type:Function},init:{type:Boolean,default:!0},params:{type:Object},tree:{type:Boolean,default:!1}},Z=Object.assign({},Y,T);function q(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!U(n)}const G=F({props:Z,emits:["update:modelValue","update:modelLabel","change"],setup(n,{attrs:C,emit:m,slots:p}){const y=x(n,"modelValue",m,{defaultValue:""}),L=x(n,"modelLabel",m,{defaultValue:""}),f=B(),d=B(n.options),h=$(()=>({...{...X(n,Object.keys(T))},...C,collapseTags:!1}));k(()=>{n.multiple&&_(),n.init&&v()});const P=e=>{var i;const{labelInValue:a,labelKey:l,valueKey:u,multiple:o,valueObject:s}=n;let r=S(e)?e:[e];s&&(r=r.map(g=>g[u]));const t=c(d).filter(g=>r.includes(g[u]));if(L.value=o?t==null?void 0:t.map(g=>g[l]):(i=t[0])==null?void 0:i[l],a){m("change",o?t||[]:t[0]||{});return}m("change",e)},V=async e=>{e&&c(d).length===0&&v()},v=async()=>{var u;const{params:e,api:a}=n;if(!H(a))return;const l=await a(e);d.value=((u=l.data)==null?void 0:u.list)||l.data},_=()=>{var a,l;if(!c(f))return;const e=document.createElement("span");e.style.display="none",e.className="el-tag el-tag--info el-tag--default el-tag--light el-tag-max-count",(l=(a=c(f).$refs.tags)==null?void 0:a.children)==null||l[0].appendChild(e)},E=()=>{M(()=>{var l,u;if(!c(f))return;const{maxTagCount:e,maxTagPlaceholder:a}=n;Array.from(((u=(l=c(f).$refs.tags)==null?void 0:l.children)==null?void 0:u[0].children)||[]).filter(o=>{if(o.className.includes("el-tag-max-count")){const s=c(y);return s.length>e?(o.style.display="inline-flex",o.innerHTML=`<span class="el-tag__content"><span class="el-select__tags-text">
                                    ${a?a(s.length-e):`+${s.length-e}`}
                                    </span></span>`):o.style.display="none",!1}return!0}).forEach((o,s)=>{s>=e?o.style.display="none":o.style.display="inline-flex"})})},K=()=>{const{valueObject:e,modelValue:a,valueKey:l,labelKey:u}=n;let o=[];const s=S(a)?a:[a];return e?o=s.map(r=>r[u]):s.forEach(r=>{const t=c(d).find(i=>i[l]===r);o.push(t?t[u]:r)}),b("span",null,[o.join()])},N=()=>{let e;return b(I,j({ref:f},h.value,{modelValue:y.value,"onUpdate:modelValue":a=>y.value=a,onChange:P,"onVisible-change":V}),q(e=A())?e:{default:()=>[e]})},w=()=>b(R,j({ref:f},h.value,{modelValue:y.value,"onUpdate:modelValue":e=>y.value=e,"check-strictly":!0,"default-expand-all":!0,"onVisible-change":V,data:d.value}),null),A=()=>{const{valueKey:e,labelKey:a,valueObject:l,modelValue:u,modelLabel:o,multiple:s}=n;if(p.default)return p.default();const r=c(d).map(t=>b(O,{key:t[e],label:t[a],value:l?t:t[e],disabled:t.disabled},{default:()=>{var i;return[(i=p.option)==null?void 0:i.call(p,{scope:t})]}}));return!s&&!l&&!Q(u)&&(c(d).length===0||!c(d).find(t=>t[e]===u))&&r.push(b(O,{label:o,value:u},null)),r};return()=>{const{text:e,tree:a,multiple:l}=n;return l&&E(),e?K():a?w():N()}}});export{G as _};
