import{d as V,S as j,c as S,b5 as G,o as n,v as p,X as z,u as r,b as y,R as Q,a0 as X,b6 as J,P as Y,Q as Z,i as ee,b7 as te,b8 as ae,aW as ne,b9 as oe,ba as le,f as m,ak as re,w as h,y as g,V as v,F as B,z as A,N as T,x as E,ao as se,a7 as ue}from"./.pnpm.b1628590.js";import{c as x,b as pe,d as D,o as ie,h as N,k as K}from"./index.c8e2dcea.js";import{F as C,c as de}from"./componentEnum.0faf2556.js";const ce={small:{type:Boolean,default:!0},background:{type:Boolean,default:!0},total:{type:Number,default:0},pagerCount:{type:Number,default:7},layout:{type:String,default:"total, prev, pager, next, sizes"},disabled:{type:Boolean,default:!1},hideOnSinglePage:{type:Boolean,default:!1},currentPage:{type:Number,default:1},pageSize:{type:Number,default:10}},fe=V({__name:"base-pagination",props:ce,emits:["update:current-page","update:page-size","size-change","current-change"],setup(s,{emit:i}){const d=s,w=j(),a=S(()=>({...d,...w})),f=o=>{i("update:page-size",o),i("size-change",o)},c=o=>{i("update:current-page",o),i("current-change",o)};return(o,O)=>{const k=G;return n(),p(k,z(r(a),{onSizeChange:f,onCurrentChange:c}),null,16)}}});function ye(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!ee(s)}const ge=V({props:{operation:{type:Array},scope:{type:Object}},setup(s){const i=a=>y(pe,{type:"primary",link:!0,onClick:()=>!a.confirm&&a.callFunction(s.scope)},{default:()=>[y(x,{icon:a.icon,class:"mr5"},null),a.label]}),d=a=>y(J,{title:`\u662F\u5426\u786E\u8BA4${a.label}?`||a.tip,onConfirm:()=>a.callFunction(s.scope)},{reference:()=>i(a)}),w=()=>{var f;const a=(f=s.operation)==null?void 0:f.slice(2);return y(Z,null,{default:()=>[a==null?void 0:a.map(c=>{let o;return y(Y,null,ye(o=i(c))?o:{default:()=>[o]})})]})};return()=>{var c;const a=(c=s.operation)==null?void 0:c.slice(0,2).map(o=>o.confirm?d(o):i(o)),f=s.operation.length>2?[y(Q,null,{default:()=>[y(x,{icon:"svg-more",class:"pointer more-icon",size:20},null)],dropdown:()=>w()})]:[];return y(X,null,{default:()=>[a==null?void 0:a.concat(f)]})}}});const be=D(ge,[["__scopeId","data-v-87bd8ccd"]]),_e={data:{type:Array,required:!0,default:()=>[]},height:[String,Number],maxHeight:[String,Number],stripe:{type:Boolean,default:!1},border:{type:Boolean,default:!1},fit:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!0},defaultExpandAll:{type:Boolean,default:!1},expandRowKeys:{type:Array,default:()=>[]},defaultSort:{type:Object},showSummary:{type:Boolean,default:!1},sumText:{type:String,default:"\u5408\u8BA1"},summaryMethod:{type:Function},spanMethod:{type:Function},scrollbarAlwaysOn:{type:Boolean,default:!1},flexible:{type:Boolean,default:!1},tableLayout:{type:String,default:"fixed"}},U={loading:{type:Boolean,default:!1},indexShow:{type:Boolean,default:!0},expandShow:{type:Boolean,default:!1},selectionShow:{type:Boolean,default:!1},text:{type:Boolean,default:!1},columns:{type:Array,default:()=>[]},showPagination:{type:Boolean,default:!0},pagination:{type:Object,default:()=>({})},position:{type:String,default:"bottomCenter"},currentKey:{type:String,default:"currentPage"},pageSizeKey:{type:String,default:"pageSize"}},me=Object.assign({},_e,U),he={class:"base-table"},we={key:0,class:"base-table-required"},Se=V({__name:"base-table",props:me,emits:["selectable","pagination-change"],setup(s,{emit:i}){const d=s,w=j(),a=S(()=>({...{...ie(d,Object.keys(U))},...w})),f=S(()=>{var l;const e=d.pagination;return e.total||(e.total=((l=d.data)==null?void 0:l.length)||0),{...e}}),c=S(()=>(e,l)=>N(e.formatter)?e.formatter(l.row):l.row[e.fieldName]),o=S(()=>d.columns.filter(e=>K(e.active)||e.active)),O=(e,l)=>{let b=!0;return i("selectable",{row:e,index:l},P=>{b=P}),b},k=()=>{const{pageSizeKey:e,currentKey:l}=d.pagination;N(r(a).onRefresh)&&r(a).onRefresh(),i("pagination-change",{[e]:d.pagination[e],[l]:d.pagination[l]})};return(e,l)=>{const b=te,P=ae,R=ne,I=be,L=ue,M=oe,q=fe,H=le;return n(),m("div",he,[re((n(),p(M,z({"row-key":"id"},r(a),{"header-cell-class-name":"base-table-header-cell"}),{empty:h(()=>[e.$slots.empty?g("",!0):(n(),p(L,{key:0,description:"\u6682\u65E0\u6570\u636E","image-size":64})),v(e.$slots,"empty",{},void 0,!0)]),default:h(()=>[e.expandShow?(n(),p(b,{key:0,fixed:"left",type:"expand"},{default:h(t=>[v(e.$slots,"expand",{scope:t},void 0,!0)]),_:3})):g("",!0),e.selectionShow?(n(),p(b,{key:1,selectable:O,fixed:"left",type:"selection",width:"50"})):g("",!0),e.indexShow?(n(),p(b,{key:2,label:"\u5E8F\u53F7",fixed:"left",type:"index",width:"60",align:"center"})):g("",!0),e.$slots.default?g("",!0):(n(!0),m(B,{key:3},A(r(o),(t,W)=>(n(),p(b,{key:W,"column-key":t.fieldName,prop:t.fieldName,label:t.fieldDesc,width:t.width,fixed:t.fixed,"min-width":t.minWidth||80,"show-overflow-tooltip":t.showOverflowTooltip,align:t.align||"center"},{header:h(u=>[e.$slots.header?g("",!0):(n(),m(B,{key:0},[t.required?(n(),m("span",we," * ")):g("",!0),T(" "+E(u.column.label),1)],64)),v(e.$slots,"header",{scope:u,column:t},void 0,!0)]),default:h(u=>{var $,F;return[t.formType===r(C).SLOT?v(e.$slots,"tableColumn",{key:0,scope:u,column:t},void 0,!0):t.formType===r(C).TAG?(n(!0),m(B,{key:1},A(($=r(c)(t,u))==null?void 0:$.split(","),_=>(n(),p(P,{key:_,type:r(N)(t.type)?t.type(u.row):t.type},{default:h(()=>[T(E(_),1)]),_:2},1032,["type"]))),128)):t.formType===r(C).SWITCH?(n(),p(R,{key:2,modelValue:u.row[t.fieldName],"onUpdate:modelValue":_=>u.row[t.fieldName]=_,"active-value":1,"inactive-value":0,"before-change":(F=t==null?void 0:t.callFunction)==null?void 0:F.bind(null,u.row)},null,8,["modelValue","onUpdate:modelValue","before-change"])):t.formType===r(C).OPERATION?(n(),p(I,{key:3,operation:t.operation,scope:u},null,8,["operation","scope"])):r(K)(t.formType)?(n(),m(B,{key:4},[T(E(r(c)(t,u)),1)],64)):(n(),p(se(r(de).get(t.formType)),z({key:5,modelValue:u.row[t.fieldName],"onUpdate:modelValue":_=>u.row[t.fieldName]=_,class:"w100"},t.config),null,16,["modelValue","onUpdate:modelValue"]))]}),_:2},1032,["column-key","prop","label","width","fixed","min-width","show-overflow-tooltip","align"]))),128))]),_:3},16)),[[H,e.loading]]),e.showPagination?(n(),p(q,z({key:0,"current-page":e.pagination[e.currentKey],"onUpdate:current-page":l[0]||(l[0]=t=>e.pagination[e.currentKey]=t),"page-size":e.pagination[e.pageSizeKey],"onUpdate:page-size":l[1]||(l[1]=t=>e.pagination[e.pageSizeKey]=t)},r(f),{onCurrentChange:k,onSizeChange:k,class:`base-table-pagination mt10 base-table-pagination-${e.position}`}),null,16,["current-page","page-size","class"])):g("",!0)])}}});const Ce=D(Se,[["__scopeId","data-v-070200f3"]]);export{Ce as _};
