import{h as z,c as K,q as G,d as O,b as U}from"./index.7ec48b1e.js";import{d as S,n as u,J as q,b0 as J,o as T,v as M,w as t,b as e,k as _,u as o,b1 as Q,x as H,N as B,$ as N,a3 as P,G as R,aC as V,aG as I,p as W,j as X,aQ as Y,f as Z,F as ee}from"./.pnpm.b1628590.js";import{_ as te}from"./index.a9b6259e.js";import{_ as ae}from"./base-json.vue_vue_type_script_setup_true_lang.a15da5c1.js";import{g as le}from"./dept.9625684c.js";const $=l=>(W("data-v-0b8a185d"),l=l(),X(),l),se=$(()=>_("div",{class:"base-column-title pl15"},"\u5B57\u6BB5",-1)),oe={class:"padding15 border-box"},ne=$(()=>_("div",{class:"base-column-title pl15"},"\u5DF2\u9009\u5B57\u6BB5",-1)),ce={class:"padding15 border-box"},ue={class:"base-column-choose-item flex-row-center pl10 pr10"},de=["title"],ie={class:"base-column-setting-tip"},_e=S({__name:"base-tree-select",props:{data:{type:Array,default:()=>[]},nodeKey:{type:String,default:"id"},fieldNames:{type:Object,default:()=>({label:"label",children:"children"})},height:{type:String,default:"450px"}},emits:["save"],setup(l,{expose:f,emit:g}){const m=l,c=u(""),d=u([]),h=u(null),i=u(),s=u(),k=({data:a,callback:n,type:D="key"})=>{o(s).showDialog(),h.value=n,N(()=>{D==="node"?o(i).setCheckedNodes(a||[]):o(i).setCheckedKeys(a||[]),b()})},v=()=>{r(),o(s).hideDialog()},r=()=>{c.value="",d.value=[],h.value=null},y=(a,n)=>a?n[m.fieldNames.label].indexOf(a)!==-1:!0,b=()=>{d.value=o(i).getCheckedNodes()},x=a=>{o(i).setChecked(a,!1,!0),N(()=>{b()})},w=a=>{var n;z(h.value)&&(a(!0),(n=o(h))==null||n(d.value),setTimeout(()=>{a(!1),v()},600)),g("save",d.value)};return q(c,a=>{o(i).filter(a)}),f({showDialog:k,hideDialog:v}),(a,n)=>{const D=P,A=J,C=R,E=V,F=K,L=I,j=G;return T(),M(j,{class:"base-tree-select",title:"\u9009\u62E9\u5B57\u6BB5",ref_key:"baseDialogRef",ref:s,width:"870px",saveText:"\u4FDD \u5B58",cancelText:"\u53D6 \u6D88",closeFun:r,onSave:w},{default:t(()=>[e(L,{gutter:0},{default:t(()=>[e(E,{span:12,class:"base-tree-box"},{default:t(()=>[se,_("div",oe,[e(D,{modelValue:c.value,"onUpdate:modelValue":n[0]||(n[0]=p=>c.value=p),placeholder:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u540D\u79F0",class:"mb15"},null,8,["modelValue"]),e(C,{"view-style":{height:l.height}},{default:t(()=>[e(A,{data:l.data,"node-key":l.nodeKey,ref_key:"treeRef",ref:i,"show-checkbox":"",props:l.fieldNames,"filter-node-method":y,"expand-on-click-node":!1,onCheck:b,"default-expand-all":""},null,8,["data","node-key","props"])]),_:1},8,["view-style"])])]),_:1}),e(E,{span:12,class:"base-tree-box"},{default:t(()=>[ne,_("div",ce,[e(C,{"view-style":{height:l.height}},{default:t(()=>[e(o(Q),{modelValue:d.value,"onUpdate:modelValue":n[1]||(n[1]=p=>d.value=p),animation:100,"item-key":"fieldName",forceFallback:!0,handle:".move"},{item:t(({element:p})=>[_("div",ue,[e(F,{"el-name":"rank",size:16,class:"move mr5",hover:""}),_("div",{class:"text-hidden w100",title:p[l.fieldNames.label]},H(p[l.fieldNames.label]),9,de),e(F,{"el-name":"close",size:14,class:"pointer",hover:"",onClick:fe=>x(p)},null,8,["onClick"])])]),_:1},8,["modelValue"])]),_:1},8,["view-style"])])]),_:1}),_("div",ie,[B(" \u6CE8\uFF1A\u62D6\u52A8 "),e(F,{"el-name":"rank",size:14,class:"ml5 mr5"}),B(" \u56FE\u6807\u53EF\u8C03\u6574\u987A\u5E8F ")])]),_:1})]),_:1},512)}}});const re=O(_e,[["__scopeId","data-v-0b8a185d"]]),pe={class:"page-func-tree-select"},ke=S({__name:"index",setup(l){const f=u(),g=u([]),m=u([]),c=u([5,6]),d={label:"deptName",children:"children"};Y(async()=>{const s=await le();g.value=s.data});const h=()=>{o(f).showDialog({data:m.value,type:"node",callback:s=>{m.value=s}})},i=()=>{o(f).showDialog(c.value,s=>{m.value=s}),o(f).showDialog({data:c.value,type:"keys",callback:s=>{c.value=s.map(k=>k.deptId)}})};return(s,k)=>{const v=U,r=V,y=ae,b=R,x=I,w=te,a=re;return T(),Z(ee,null,[_("div",pe,[e(w,{title:"\u57FA\u7840\u793A\u4F8B"},{default:t(()=>[e(x,null,{default:t(()=>[e(r,{span:12},{default:t(()=>[e(v,{onClick:h},{default:t(()=>[B("\u70B9\u51FB\u9009\u62E9\u90E8\u95E8")]),_:1})]),_:1}),e(r,{span:12},{default:t(()=>[e(b,{"view-style":"height:500px"},{default:t(()=>[e(y,{data:m.value},null,8,["data"])]),_:1})]),_:1})]),_:1})]),_:1}),e(w,{title:"\u521D\u59CB\u503C"},{default:t(()=>[e(x,null,{default:t(()=>[e(r,{span:12},{default:t(()=>[e(v,{onClick:i},{default:t(()=>[B("\u70B9\u51FB\u9009\u62E9\u90E8\u95E8")]),_:1})]),_:1}),e(r,{span:12},{default:t(()=>[e(b,{"view-style":"height:500px"},{default:t(()=>[e(y,{data:c.value},null,8,["data"])]),_:1})]),_:1})]),_:1})]),_:1})]),e(a,{ref_key:"baseTreeSelectRef",ref:f,"node-key":"deptId",fieldNames:d,data:g.value},null,8,["data"])],64)}}});export{ke as default};
