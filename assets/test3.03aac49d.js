import{J as he,bl as ke,bS as R,n as fe,q as le,s as ve,z as ce,d as U,co as de,dG as Ie,dH as _e,be as me,y as pe,dI as Le,r as b,ci as Ee,bQ as Ce,x as h,V as oe,a6 as ge,a1 as we,o as k,B as re,f as c,w as E,e as v,D as d,g as e,E as ie,b7 as ze,ac as I,bj as x,c2 as Se,c as O,a5 as ue,bv as xe,bw as Oe,dJ as Te,dK as Ne,F as $e,dL as Ae,dM as Me,aM as Re,au as Ve,bt as De,C as Q,ad as Be,cD as Fe,G as ye,c8 as V,bk as M,dN as Pe,H as be,aR as Ye,dO as He,aP as Xe,t as je,dP as We,R as Ge,dQ as Ze,dR as qe,dS as Je}from"./index.c50eeaf2.js";var Ke="Expected a function";function ne(f,_,r){var i=!0,m=!0;if(typeof f!="function")throw new TypeError(Ke);return he(r)&&(i="leading"in r?!!r.leading:i,m="trailing"in r?!!r.trailing:m),ke(f,_,{leading:i,maxWait:_,trailing:m})}const Qe=()=>R&&/firefox/i.test(window.navigator.userAgent),Ue=fe({urlList:{type:le(Array),default:()=>ve([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1},teleported:{type:Boolean,default:!1},closeOnPressEscape:{type:Boolean,default:!0}}),ea={close:()=>!0,switch:f=>ce(f)},aa=["src"],ta=U({name:"ElImageViewer"}),sa=U({...ta,props:Ue,emits:ea,setup(f,{expose:_,emit:r}){const i=f,m={CONTAIN:{name:"contain",icon:de(Ie)},ORIGINAL:{name:"original",icon:de(_e)}},C=Qe()?"DOMMouseScroll":"mousewheel",{t:ee}=me(),l=pe("image-viewer"),{nextZIndex:D}=Le(),p=b(),L=b([]),N=Ee(),g=b(!0),u=b(i.initialIndex),$=Ce(m.CONTAIN),o=b({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),B=h(()=>{const{urlList:a}=i;return a.length<=1}),H=h(()=>u.value===0),X=h(()=>u.value===i.urlList.length-1),F=h(()=>i.urlList[u.value]),ae=h(()=>{const{scale:a,deg:s,offsetX:n,offsetY:w,enableTransition:z}=o.value;let y=n/a,S=w/a;switch(s%360){case 90:case-270:[y,S]=[S,-y];break;case 180:case-180:[y,S]=[-y,-S];break;case 270:case-90:[y,S]=[-S,y];break}const A={transform:`scale(${a}) rotate(${s}deg) translate(${y}px, ${S}px)`,transition:z?"transform .3s":""};return $.value.name===m.CONTAIN.name&&(A.maxWidth=A.maxHeight="100%"),A}),j=h(()=>ce(i.zIndex)?i.zIndex:D());function T(){se(),r("close")}function te(){const a=ne(n=>{switch(n.code){case M.esc:i.closeOnPressEscape&&T();break;case M.space:q();break;case M.left:J();break;case M.up:t("zoomIn");break;case M.right:K();break;case M.down:t("zoomOut");break}}),s=ne(n=>{(n.wheelDelta?n.wheelDelta:-n.detail)>0?t("zoomIn",{zoomRate:1.2,enableTransition:!1}):t("zoomOut",{zoomRate:1.2,enableTransition:!1})});N.run(()=>{V(document,"keydown",a),V(document,C,s)})}function se(){N.stop()}function W(){g.value=!1}function G(a){g.value=!1,a.target.alt=ee("el.image.error")}function Z(a){if(g.value||a.button!==0||!p.value)return;o.value.enableTransition=!1;const{offsetX:s,offsetY:n}=o.value,w=a.pageX,z=a.pageY,y=ne(A=>{o.value={...o.value,offsetX:s+A.pageX-w,offsetY:n+A.pageY-z}}),S=V(document,"mousemove",y);V(document,"mouseup",()=>{S()}),a.preventDefault()}function P(){o.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function q(){if(g.value)return;const a=Pe(m),s=Object.values(m),n=$.value.name,z=(s.findIndex(y=>y.name===n)+1)%a.length;$.value=m[a[z]],P()}function Y(a){const s=i.urlList.length;u.value=(a+s)%s}function J(){H.value&&!i.infinite||Y(u.value-1)}function K(){X.value&&!i.infinite||Y(u.value+1)}function t(a,s={}){if(g.value)return;const{zoomRate:n,rotateDeg:w,enableTransition:z}={zoomRate:1.4,rotateDeg:90,enableTransition:!0,...s};switch(a){case"zoomOut":o.value.scale>.2&&(o.value.scale=Number.parseFloat((o.value.scale/n).toFixed(3)));break;case"zoomIn":o.value.scale<7&&(o.value.scale=Number.parseFloat((o.value.scale*n).toFixed(3)));break;case"clockwise":o.value.deg+=w;break;case"anticlockwise":o.value.deg-=w;break}o.value.enableTransition=z}return oe(F,()=>{ge(()=>{const a=L.value[0];a!=null&&a.complete||(g.value=!0)})}),oe(u,a=>{P(),r("switch",a)}),we(()=>{var a,s;te(),(s=(a=p.value)==null?void 0:a.focus)==null||s.call(a)}),_({setActiveItem:Y}),(a,s)=>(k(),re(Fe,{to:"body",disabled:!a.teleported},[c(Be,{name:"viewer-fade",appear:""},{default:E(()=>[v("div",{ref_key:"wrapper",ref:p,tabindex:-1,class:d(e(l).e("wrapper")),style:ie({zIndex:e(j)})},[v("div",{class:d(e(l).e("mask")),onClick:s[0]||(s[0]=ze(n=>a.hideOnClickModal&&T(),["self"]))},null,2),I(" CLOSE "),v("span",{class:d([e(l).e("btn"),e(l).e("close")]),onClick:T},[c(e(x),null,{default:E(()=>[c(e(Se))]),_:1})],2),I(" ARROW "),e(B)?I("v-if",!0):(k(),O(ue,{key:0},[v("span",{class:d([e(l).e("btn"),e(l).e("prev"),e(l).is("disabled",!a.infinite&&e(H))]),onClick:J},[c(e(x),null,{default:E(()=>[c(e(xe))]),_:1})],2),v("span",{class:d([e(l).e("btn"),e(l).e("next"),e(l).is("disabled",!a.infinite&&e(X))]),onClick:K},[c(e(x),null,{default:E(()=>[c(e(Oe))]),_:1})],2)],64)),I(" ACTIONS "),v("div",{class:d([e(l).e("btn"),e(l).e("actions")])},[v("div",{class:d(e(l).e("actions__inner"))},[c(e(x),{onClick:s[1]||(s[1]=n=>t("zoomOut"))},{default:E(()=>[c(e(Te))]),_:1}),c(e(x),{onClick:s[2]||(s[2]=n=>t("zoomIn"))},{default:E(()=>[c(e(Ne))]),_:1}),v("i",{class:d(e(l).e("actions__divider"))},null,2),c(e(x),{onClick:q},{default:E(()=>[(k(),re($e(e($).icon)))]),_:1}),v("i",{class:d(e(l).e("actions__divider"))},null,2),c(e(x),{onClick:s[3]||(s[3]=n=>t("anticlockwise"))},{default:E(()=>[c(e(Ae))]),_:1}),c(e(x),{onClick:s[4]||(s[4]=n=>t("clockwise"))},{default:E(()=>[c(e(Me))]),_:1})],2)],2),I(" CANVAS "),v("div",{class:d(e(l).e("canvas"))},[(k(!0),O(ue,null,Re(a.urlList,(n,w)=>Ve((k(),O("img",{ref_for:!0,ref:z=>L.value[w]=z,key:n,src:n,style:ie(e(ae)),class:d(e(l).e("img")),onLoad:W,onError:G,onMousedown:Z},null,46,aa)),[[De,w===u.value]])),128))],2),Q(a.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var na=ye(sa,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const la=be(na),oa=fe({hideOnClickModal:{type:Boolean,default:!1},src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:{type:Boolean,default:!1},scrollContainer:{type:le([String,Object])},previewSrcList:{type:le(Array),default:()=>ve([])},previewTeleported:{type:Boolean,default:!1},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0}}),ra={load:f=>f instanceof Event,error:f=>f instanceof Event,switch:f=>ce(f),close:()=>!0,show:()=>!0},ia=["src","loading"],ua={key:0},ca=U({name:"ElImage",inheritAttrs:!1}),da=U({...ca,props:oa,emits:ra,setup(f,{emit:_}){const r=f;let i="";const{t:m}=me(),C=pe("image"),ee=Ye(),l=He(),D=b(),p=b(!1),L=b(!0),N=b(!1),g=b(),u=b(),$=R&&"loading"in HTMLImageElement.prototype;let o,B;const H=h(()=>ee.style),X=h(()=>{const{fit:t}=r;return R&&t?{objectFit:t}:{}}),F=h(()=>{const{previewSrcList:t}=r;return Array.isArray(t)&&t.length>0}),ae=h(()=>{const{previewSrcList:t,initialIndex:a}=r;let s=a;return a>t.length-1&&(s=0),s}),j=h(()=>r.loading==="eager"?!1:!$&&r.loading==="lazy"||r.lazy),T=()=>{!R||(L.value=!0,p.value=!1,D.value=r.src)};function te(t){L.value=!1,p.value=!1,_("load",t)}function se(t){L.value=!1,p.value=!0,_("error",t)}function W(){qe(g.value,u.value)&&(T(),P())}const G=Je(W,200);async function Z(){var t;if(!R)return;await ge();const{scrollContainer:a}=r;We(a)?u.value=a:Ge(a)&&a!==""?u.value=(t=document.querySelector(a))!=null?t:void 0:g.value&&(u.value=Ze(g.value)),u.value&&(o=V(u,"scroll",G),setTimeout(()=>W(),100))}function P(){!R||!u.value||!G||(o==null||o(),u.value=void 0)}function q(t){if(!!t.ctrlKey){if(t.deltaY<0)return t.preventDefault(),!1;if(t.deltaY>0)return t.preventDefault(),!1}}function Y(){!F.value||(B=V("wheel",q,{passive:!1}),i=document.body.style.overflow,document.body.style.overflow="hidden",N.value=!0,_("show"))}function J(){B==null||B(),document.body.style.overflow=i,N.value=!1,_("close")}function K(t){_("switch",t)}return oe(()=>r.src,()=>{j.value?(L.value=!0,p.value=!1,P(),Z()):T()}),we(()=>{j.value?Z():T()}),(t,a)=>(k(),O("div",{ref_key:"container",ref:g,class:d([e(C).b(),t.$attrs.class]),style:ie(e(H))},[D.value!==void 0&&!p.value?(k(),O("img",Xe({key:0},e(l),{src:D.value,loading:t.loading,style:e(X),class:[e(C).e("inner"),e(F)&&e(C).e("preview"),L.value&&e(C).is("loading")],onClick:Y,onLoad:te,onError:se}),null,16,ia)):I("v-if",!0),L.value||p.value?(k(),O("div",{key:1,class:d(e(C).e("wrapper"))},[L.value?Q(t.$slots,"placeholder",{key:0},()=>[v("div",{class:d(e(C).e("placeholder"))},null,2)]):p.value?Q(t.$slots,"error",{key:1},()=>[v("div",{class:d(e(C).e("error"))},je(e(m)("el.image.error")),3)]):I("v-if",!0)],2)):I("v-if",!0),e(F)?(k(),O(ue,{key:2},[N.value?(k(),re(e(la),{key:0,"z-index":t.zIndex,"initial-index":e(ae),infinite:t.infinite,"url-list":t.previewSrcList,"hide-on-click-modal":t.hideOnClickModal,teleported:t.previewTeleported,"close-on-press-escape":t.closeOnPressEscape,onClose:J,onSwitch:K},{default:E(()=>[t.$slots.viewer?(k(),O("div",ua,[Q(t.$slots,"viewer")])):I("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):I("v-if",!0)],64)):I("v-if",!0)],6))}});var fa=ye(da,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const ma=be(fa);const pa="/assets/test1.f35ba08b.jpg",ga="/assets/test2.746be997.jpg",wa="/assets/test3.3c31bc92.jpg";export{ma as E,ga as a,wa as b,pa as t};
