import{_ as w}from"./index-56bf70a1.js";import{bU as F,r as h,g as t,a4 as W,a2 as E,dU as T,ar as N,d as O,b as R,o as A,c as I,f as u,w as l,h as _,e as U,i as $}from"./index-2e4d6250.js";import{_ as z}from"./base-form.vue_vue_type_script_setup_true_lang-7c5d10cf.js";import{F as x}from"./componentEnum-75f2f242.js";import"./el-col-fec1900f.js";import"./el-form-item-1c77742a.js";import"./_Uint8Array-dae95bcd.js";import"./el-checkbox-8fd6afa3.js";import"./base-select.vue_vue_type_script_lang-d1331d18.js";import"./el-tag-73cc0598.js";import"./el-tree-6d6a3a2e.js";import"./base-input-number-c527e19c.js";import"./base-icon-picker.vue_vue_type_style_index_0_lang-9ef810d9.js";import"./localeData-987033d0.js";const D=Symbol("watermark-dom"),B=(m=h(document.body))=>{const C=T(function(){const e=t(m);if(!e)return;const{clientHeight:o,clientWidth:c}=e;Object.assign(n.value,{width:c,height:o}),d()},200),r=D.toString(),a=F(),n=h({}),f=()=>{const e=t(a);a.value=void 0;const o=t(m);!o||e&&o.removeChild(e)};function k(){const e=document.createElement("canvas"),o=t(n).step||1,c=t(n).value||"\u7F3A\u5C11\u6C34\u5370\u503C",s=t(n).color||"rgba(0,0,0,0.25)",p=t(n).size||"15px",g=200*o,b=140*o;Object.assign(e,{width:g,height:b});const i=e.getContext("2d");return i&&(i.rotate(-20*Math.PI/120),i.font=p+" Vedana",i.fillStyle=s,i.textAlign="left",i.textBaseline="middle",i.fillText(c,g/20,b)),e.toDataURL("image/png")}function d(){const e=t(a),o=t(n).value||"\u7F3A\u5C11\u6C34\u5370\u503C";!e||(t(n).width&&(e.style.width=`${t(n).width}px`),t(n).height&&(e.style.height=`${t(n).height}px`),o&&(e.style.background=`url(${k()}) left top repeat`))}const v=()=>{if(t(a))return d(),r;const e=document.createElement("div");a.value=e,e.id=r,e.style.pointerEvents="none",e.style.top="0px",e.style.left="0px",e.style.position="absolute",e.style.zIndex="100000";const o=t(m);if(!o)return r;const{clientHeight:c,clientWidth:s}=o;return Object.assign(n.value,{width:s,height:c}),d(),o.appendChild(e),r};function y(e){n.value=e,v(),W(m,C),N()&&E(()=>{f()})}return{setWatermark:y,clear:f}},M={class:"page-func-watermark"},ee=O({__name:"index",setup(m){const C=h([{fieldName:"value",fieldDesc:"\u6C34\u5370\u540D\u5B57",fieldType:x.INPUT},{fieldName:"color",fieldDesc:"\u6C34\u5370\u989C\u8272",fieldType:x.COLOR}]),r=h(),a=R({}),{setWatermark:n,clear:f}=B(),{setWatermark:k,clear:d}=B(r),v=()=>{n({value:a.value,color:a.color})},y=()=>{k({value:a.value,color:a.color})};return(e,o)=>{const c=z,s=$,p=w;return A(),I("div",M,[u(p,{title:"\u9875\u9762\u6C34\u5370"},{default:l(()=>[u(c,{columns:C.value,model:a,inline:"",colProps:{span:8}},null,8,["columns","model"]),u(s,{type:"primary",onClick:v},{default:l(()=>[_("\u521B\u5EFA\u6C34\u5370")]),_:1}),u(s,{type:"primary",onClick:t(f)},{default:l(()=>[_("\u6E05\u9664\u6C34\u5370")]),_:1},8,["onClick"])]),_:1}),u(p,{title:"\u5BB9\u5668\u6C34\u5370"},{default:l(()=>[U("div",{style:{height:"400px"},ref_key:"boxRef",ref:r},[u(s,{type:"primary",onClick:y},{default:l(()=>[_("\u521B\u5EFA\u6C34\u5370")]),_:1}),u(s,{type:"primary",onClick:t(d)},{default:l(()=>[_("\u6E05\u9664\u6C34\u5370")]),_:1},8,["onClick"])],512)]),_:1})])}}});export{ee as default};
