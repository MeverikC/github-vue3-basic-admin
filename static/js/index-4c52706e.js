import{_ as w}from"./index-d874a39f.js";import{_ as F}from"./index.vue_vue_type_script_setup_true_lang-4cee302a.js";import{_ as W}from"./base-form.vue_vue_type_script_setup_true_lang-d3f27f8b.js";import{bQ as E,r as h,g as e,a3 as T,a1 as N,e4 as O,aw as R,d as A,b as I,o as $,c as z,f as u,w as l,i as _,e as D}from"./index-a5229f6a.js";import{F as x}from"./componentEnum-148c49ad.js";import"./el-popper-7ddaae8a.js";import"./el-col-cf5c829b.js";/* empty css                  */import"./el-form-item-ef644bcd.js";import"./_Uint8Array-ed197101.js";import"./el-checkbox-54a9f3c2.js";import"./base-input.vue_vue_type_script_setup_true_lang-aaf651f6.js";/* empty css                 */import"./base-select.vue_vue_type_script_lang-0336ccbc.js";import"./el-tag-66fb40cd.js";import"./el-tree-774f1170.js";import"./index-89fa7c11.js";import"./debounce-4aa199f9.js";import"./index-d6a23b34.js";import"./base-input-number-c84da128.js";import"./base-icon-picker.vue_vue_type_style_index_0_lang-5eb0b80f.js";import"./dropdown-897b280d.js";import"./localeData-138b15ef.js";import"./index-08c2348e.js";import"./position-8d3f8ae4.js";const M=Symbol("watermark-dom"),B=(m=h(document.body))=>{const C=O(function(){const t=e(m);if(!t)return;const{clientHeight:o,clientWidth:s}=t;Object.assign(n.value,{width:s,height:o}),p()},200),i=M.toString(),r=E(),n=h({}),f=()=>{const t=e(r);r.value=void 0;const o=e(m);!o||t&&o.removeChild(t)};function k(){const t=document.createElement("canvas"),o=e(n).step||1,s=e(n).value||"\u7F3A\u5C11\u6C34\u5370\u503C",a=e(n).color||"rgba(0,0,0,0.25)",d=e(n).size||"15px",g=200*o,b=140*o;Object.assign(t,{width:g,height:b});const c=t.getContext("2d");return c&&(c.rotate(-20*Math.PI/120),c.font=d+" Vedana",c.fillStyle=a,c.textAlign="left",c.textBaseline="middle",c.fillText(s,g/20,b)),t.toDataURL("image/png")}function p(){const t=e(r),o=e(n).value||"\u7F3A\u5C11\u6C34\u5370\u503C";!t||(e(n).width&&(t.style.width=`${e(n).width}px`),e(n).height&&(t.style.height=`${e(n).height}px`),o&&(t.style.background=`url(${k()}) left top repeat`))}const v=()=>{if(e(r))return p(),i;const t=document.createElement("div");r.value=t,t.id=i,t.style.pointerEvents="none",t.style.top="0px",t.style.left="0px",t.style.position="absolute",t.style.zIndex="100000";const o=e(m);if(!o)return i;const{clientHeight:s,clientWidth:a}=o;return Object.assign(n.value,{width:a,height:s}),p(),o.appendChild(t),i};function y(t){n.value=t,v(),T(m,C),R()&&N(()=>{f()})}return{setWatermark:y,clear:f}},S={class:"page-func-watermark"},mt=A({__name:"index",setup(m){const C=h([{fieldName:"value",fieldDesc:"\u6C34\u5370\u540D\u5B57",fieldType:x.INPUT},{fieldName:"color",fieldDesc:"\u6C34\u5370\u989C\u8272",fieldType:x.COLOR}]),i=h(),r=I({}),{setWatermark:n,clear:f}=B(),{setWatermark:k,clear:p}=B(i),v=()=>{n({value:r.value,color:r.color})},y=()=>{k({value:r.value,color:r.color})};return(t,o)=>{const s=W,a=F,d=w;return $(),z("div",S,[u(d,{title:"\u9875\u9762\u6C34\u5370"},{default:l(()=>[u(s,{columns:C.value,model:r,inline:"",colProps:{span:8}},null,8,["columns","model"]),u(a,{type:"primary",onClick:v},{default:l(()=>[_("\u521B\u5EFA\u6C34\u5370")]),_:1}),u(a,{type:"primary",onClick:e(f)},{default:l(()=>[_("\u6E05\u9664\u6C34\u5370")]),_:1},8,["onClick"])]),_:1}),u(d,{title:"\u5BB9\u5668\u6C34\u5370"},{default:l(()=>[D("div",{style:{height:"400px"},ref_key:"boxRef",ref:i},[u(a,{type:"primary",onClick:y},{default:l(()=>[_("\u521B\u5EFA\u6C34\u5370")]),_:1}),u(a,{type:"primary",onClick:e(p)},{default:l(()=>[_("\u6E05\u9664\u6C34\u5370")]),_:1},8,["onClick"])],512)]),_:1})])}}});export{mt as default};
