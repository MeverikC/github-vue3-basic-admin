import{_ as F}from"./index-adb41201.js";import{_ as W}from"./index.vue_vue_type_script_setup_true_lang-24f24247.js";import{_ as E}from"./base-form.vue_vue_type_script_setup_true_lang-f3eac86b.js";import{bQ as T,r as h,a1 as x,g as e,a3 as N,e5 as O,aw as R,d as A,b as I,o as $,c as z,f as u,w as l,i as _,e as D}from"./index-065da345.js";import{F as B}from"./componentEnum-68b58502.js";import"./el-popper-c7cb79b4.js";import"./el-col-b00ad58e.js";/* empty css                  */import"./el-form-item-f4a1f3d6.js";import"./_Uint8Array-8c316604.js";import"./el-checkbox-71b43bed.js";import"./base-input.vue_vue_type_script_setup_true_lang-6918b373.js";/* empty css                 */import"./base-select.vue_vue_type_script_lang-92f293ec.js";import"./el-tag-875281b9.js";import"./el-tree-01748120.js";import"./index-14248a5e.js";import"./debounce-d0ca4cd7.js";import"./index-3506dafc.js";import"./base-input-number-e7c401ce.js";import"./base-icon-picker.vue_vue_type_style_index_0_lang-e2bcb8aa.js";import"./dropdown-26ee3528.js";import"./localeData-9f77671b.js";import"./index-a34831c6.js";import"./position-c595e6f9.js";const M=Symbol("watermark-dom"),w=(m=h(document.body))=>{const C=O(function(){const t=e(m);if(!t)return;const{clientHeight:o,clientWidth:s}=t;Object.assign(n.value,{width:s,height:o}),f()},200),i=M.toString(),r=T(),n=h({}),p=()=>{const t=e(r);r.value=void 0;const o=e(m);!o||t&&o.removeChild(t)};function k(){const t=document.createElement("canvas"),o=e(n).step||1,s=e(n).value||"\u7F3A\u5C11\u6C34\u5370\u503C",a=e(n).color||"rgba(0,0,0,0.25)",d=e(n).size||"15px",g=200*o,b=140*o;Object.assign(t,{width:g,height:b});const c=t.getContext("2d");return c&&(c.rotate(-20*Math.PI/120),c.font=d+" Vedana",c.fillStyle=a,c.textAlign="left",c.textBaseline="middle",c.fillText(s,g/20,b)),t.toDataURL("image/png")}function f(){const t=e(r),o=e(n).value||"\u7F3A\u5C11\u6C34\u5370\u503C";!t||(e(n).width&&(t.style.width=`${e(n).width}px`),e(n).height&&(t.style.height=`${e(n).height}px`),o&&(t.style.background=`url(${k()}) left top repeat`))}const v=()=>{if(e(r))return f(),i;const t=document.createElement("div");r.value=t,t.id=i,t.style.pointerEvents="none",t.style.top="0px",t.style.left="0px",t.style.position="absolute",t.style.zIndex="100000";const o=e(m);if(!o)return i;const{clientHeight:s,clientWidth:a}=o;return Object.assign(n.value,{width:a,height:s}),f(),o.appendChild(t),i};function y(t){n.value=t,v(),N(m,C),R()&&x(()=>{p()})}return x(()=>{p()}),{setWatermark:y,clear:p}},S={class:"page-func-watermark"},mt=A({__name:"index",setup(m){const C=h([{fieldName:"value",fieldDesc:"\u6C34\u5370\u540D\u5B57",fieldType:B.INPUT},{fieldName:"color",fieldDesc:"\u6C34\u5370\u989C\u8272",fieldType:B.COLOR}]),i=h(),r=I({}),{setWatermark:n,clear:p}=w(),{setWatermark:k,clear:f}=w(i),v=()=>{n({value:r.value,color:r.color})},y=()=>{k({value:r.value,color:r.color})};return(t,o)=>{const s=E,a=W,d=F;return $(),z("div",S,[u(d,{title:"\u9875\u9762\u6C34\u5370"},{default:l(()=>[u(s,{columns:C.value,model:r,inline:"",colProps:{span:8}},null,8,["columns","model"]),u(a,{type:"primary",onClick:v},{default:l(()=>[_("\u521B\u5EFA\u6C34\u5370")]),_:1}),u(a,{type:"primary",onClick:e(p)},{default:l(()=>[_("\u6E05\u9664\u6C34\u5370")]),_:1},8,["onClick"])]),_:1}),u(d,{title:"\u5BB9\u5668\u6C34\u5370"},{default:l(()=>[D("div",{style:{height:"400px"},ref_key:"boxRef",ref:i},[u(a,{type:"primary",onClick:y},{default:l(()=>[_("\u521B\u5EFA\u6C34\u5370")]),_:1}),u(a,{type:"primary",onClick:e(f)},{default:l(()=>[_("\u6E05\u9664\u6C34\u5370")]),_:1},8,["onClick"])],512)]),_:1})])}}});export{mt as default};
