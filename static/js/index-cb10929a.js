import{_ as x}from"./index-25c8f987.js";import{ei as I,d as E,b as h,r as y,o as C,B,w as a,f as n,g as i,h as D,a6 as U,cb as V,aX as v,a1 as A,c as L,e as q,ac as O,a5 as $,i as j,j as z}from"./index-0b27933a.js";import{F as u}from"./componentEnum-01401fe5.js";import{S as b}from"./basic-2a5cf92e.js";import{g as w}from"./menu-a5637a9e.js";import{_ as G}from"./base-form.vue_vue_type_script_setup_true_lang-207478d9.js";import{b as H,a as K}from"./el-radio-group-20d20b78.js";import"./base-table-78d99eaf.js";import"./el-tag-d9678e7a.js";import"./base-select.vue_vue_type_script_lang-215a5c50.js";import"./el-tree-ce0d3ca3.js";import"./el-checkbox-0495a631.js";import"./_Uint8Array-3e45c491.js";import"./base-icon-picker.vue_vue_type_style_index_0_lang-df7bc1c3.js";import"./base-column-setting-3830f98d.js";import"./vuedraggable.umd-08c858c6.js";import"./vue.runtime.esm-bundler-6e13a110.js";import"./index-3e251655.js";import"./el-col-d5314668.js";import"./base-filter-3e13e323.js";import"./base-input-number-2e1c1064.js";import"./localeData-e0944d67.js";import"./el-form-item-5aaf46a3.js";const W=o=>o==="D",X=o=>o==="M",T=o=>o==="B";function P(){const o=[{fieldName:"menuName",fieldDesc:"\u83DC\u5355\u540D\u79F0",fieldType:u.INPUT},{fieldName:"status",fieldDesc:"\u72B6\u6001",fieldType:u.SELECT,config:{options:b}}],l=[{fieldName:"menuName",fieldDesc:"\u83DC\u5355\u540D\u79F0",showOverflowTooltip:!0,align:"left"},{fieldName:"icon",fieldDesc:"\u56FE\u6807",formType:"slot",align:"left",width:100},{fieldName:"sort",fieldDesc:"\u6392\u5E8F",align:"left",width:100},{fieldName:"permission",fieldDesc:"\u6743\u9650\u6807\u8BC6",align:"left"},{fieldName:"path",fieldDesc:"\u8DEF\u5F84",align:"left"},{fieldName:"status",fieldDesc:"\u72B6\u6001",formType:"tag",align:"left",type:e=>e.status===0?"danger":"",formatter:e=>I(b,e.status)},{fieldName:"createTime",fieldDesc:"\u521B\u5EFA\u65F6\u95F4",align:"left"}],r=[{fieldName:"menuType",fieldDesc:"\u83DC\u5355\u7C7B\u578B",fieldType:u.SLOT},{fieldName:"parentId",fieldDesc:"\u4E0A\u7EA7\u83DC\u5355",fieldType:u.SELECT,colProps:{span:12},config:{api:w,tree:!0,nodeKey:"id",props:{label:"menuName",children:"children"}}},{fieldName:"menuName",fieldDesc:"\u83DC\u5355\u540D\u79F0",fieldType:u.INPUT,colProps:{span:12}},{fieldName:"icon",fieldDesc:"\u83DC\u5355\u56FE\u6807",fieldType:u.ICON,colProps:{span:12},show:({model:e})=>!T(e.menuType)},{fieldName:"componentPath",fieldDesc:"\u7EC4\u4EF6\u5730\u5740",fieldType:u.INPUT,colProps:{span:12},show:({model:e})=>X(e.menuType)},{fieldName:"id",fieldDesc:"\u6743\u9650\u6807\u8BC6",fieldType:u.INPUT,colProps:{span:12},show:({model:e})=>!W(e.menuType)},{fieldName:"sort",fieldDesc:"\u6392\u5E8F",fieldType:u.NUMBER,colProps:{span:12}},{fieldName:"isFrame",fieldDesc:"\u662F\u5426\u5916\u94FE",fieldType:u.SWITCH,colProps:{span:12},show:({model:e})=>!T(e.menuType)},{fieldName:"path",fieldDesc:"\u8DEF\u7531\u5730\u5740",fieldType:u.INPUT,colProps:{span:12},show:({model:e})=>!T(e.menuType)}];return{filterColumn:o,tableColumn:l,dialogColumn:r}}const J=E({__name:"MenuDialog",emits:["success"],setup(o,{expose:l,emit:r}){const{success:e}=v(),s=h({menuType:"D"}),{dialogColumn:f}=P(),t=y(),c=y(),d={menuName:[{required:!0,message:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0",trigger:["blur","change"]}],sort:[{required:!0,message:"\u8BF7\u8F93\u5165\u83DC\u5355\u6392\u5E8F",trigger:["blur","change"]}],isFrame:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5916\u94FE",trigger:["blur","change"]}],path:[{required:!0,message:"\u8BF7\u8F93\u5165\u8DEF\u7531\u5730\u5740",trigger:["blur","change"]}]},N=()=>{i(t).showDialog(),U(()=>{i(c).instance.resetFields()})},p=()=>{i(t).hideDialog()},F=async()=>{await i(c).instance.validate(async _=>{!_||(e("\u6A21\u62DF\u65B0\u589E\u83DC\u5355\u6210\u529F"),p(),r("success"))})};return l({showDialog:N,hideDialog:p}),(_,g)=>{const m=H,S=K,R=G,M=V;return C(),B(M,{ref_key:"baseDialogRef",ref:t,width:"660px",title:"\u65B0\u589E\u83DC\u5355",onSave:F},{default:a(()=>[n(R,{ref_key:"baseFormRef",ref:c,columns:i(f),rules:d,model:s},{menuType:a(()=>[n(S,{modelValue:s.menuType,"onUpdate:modelValue":g[0]||(g[0]=k=>s.menuType=k)},{default:a(()=>[n(m,{label:"D"},{default:a(()=>[D("\u76EE\u5F55")]),_:1}),n(m,{label:"M"},{default:a(()=>[D("\u83DC\u5355")]),_:1}),n(m,{label:"B"},{default:a(()=>[D("\u6309\u94AE")]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["columns","model"])]),_:1},512)}}}),Q={class:"system-menu-container"},ye=E({__name:"index",setup(o){const{tableColumn:l,filterColumn:r}=P(),e=h({columns:r,onSearch:t,showOpen:!1,searchInfo:{dictType:""}}),s=h({columns:l,data:[],indexShow:!1,showPagination:!1,onRefresh:t}),f=y();A(()=>{t()});async function t(){const d=await w();s.data=d.data}function c(){i(f).showDialog()}return(d,N)=>{const p=j,F=z,_=x;return C(),L($,null,[q("div",Q,[n(_,{"table-title":"\u83DC\u5355\u5217\u8868","filter-config":e,"table-config":s},{buttons:a(()=>[n(p,{type:"primary",onClick:c},{default:a(()=>[D("\u65B0\u589E\u83DC\u5355")]),_:1})]),tableColumn:a(({scope:g,column:m})=>[m.fieldName==="icon"?(C(),B(F,{key:0,icon:g.row.icon,size:18},null,8,["icon"])):O("",!0)]),_:1},8,["filter-config","table-config"])]),n(J,{ref_key:"menuDialogRef",ref:f,onSuccess:t},null,512)],64)}}});export{ye as default};
