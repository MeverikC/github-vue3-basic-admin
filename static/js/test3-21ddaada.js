import{J as he,bl as ke,bS as M,n as fe,q as le,s as ve,z as ce,d as Q,co as de,dG as Ie,dH as _e,be as me,y as pe,dI as Le,r as b,ci as Ee,bQ as Ce,x as h,V as oe,a6 as ge,a1 as we,o as k,B as re,f as c,w as E,e as v,D as d,g as e,E as ie,b7 as ze,ac as I,bj as x,c2 as Se,c as O,a5 as ue,bv as xe,bw as Oe,dJ as Te,dK as Ne,F as $e,dL as Ae,dM as Re,aM as Me,au as Ve,bt as De,C as K,ad as Be,cD as je,G as ye,c8 as V,bk as R,dN as Fe,H as be,aR as Pe,dO as Ye,aP as He,t as Xe,dP as Ue,R as We,dQ as Ge,dR as Ze,dS as qe}from"./index-e4882791.js";var Je="Expected a function";function se(f,_,r){var i=!0,m=!0;if(typeof f!="function")throw new TypeError(Je);return he(r)&&(i="leading"in r?!!r.leading:i,m="trailing"in r?!!r.trailing:m),ke(f,_,{leading:i,maxWait:_,trailing:m})}const Ke=()=>M&&/firefox/i.test(window.navigator.userAgent),Qe=fe({urlList:{type:le(Array),default:()=>ve([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1},teleported:{type:Boolean,default:!1},closeOnPressEscape:{type:Boolean,default:!0}}),ea={close:()=>!0,switch:f=>ce(f)},aa=["src"],ta=Q({name:"ElImageViewer"}),na=Q({...ta,props:Qe,emits:ea,setup(f,{expose:_,emit:r}){const i=f,m={CONTAIN:{name:"contain",icon:de(Ie)},ORIGINAL:{name:"original",icon:de(_e)}},C=Ke()?"DOMMouseScroll":"mousewheel",{t:ee}=me(),l=pe("image-viewer"),{nextZIndex:D}=Le(),p=b(),L=b([]),N=Ee(),g=b(!0),u=b(i.initialIndex),$=Ce(m.CONTAIN),o=b({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),B=h(()=>{const{urlList:a}=i;return a.length<=1}),Y=h(()=>u.value===0),H=h(()=>u.value===i.urlList.length-1),j=h(()=>i.urlList[u.value]),ae=h(()=>{const{scale:a,deg:n,offsetX:s,offsetY:w,enableTransition:z}=o.value;let y=s/a,S=w/a;switch(n%360){case 90:case-270:[y,S]=[S,-y];break;case 180:case-180:[y,S]=[-y,-S];break;case 270:case-90:[y,S]=[-S,y];break}const A={transform:`scale(${a}) rotate(${n}deg) translate(${y}px, ${S}px)`,transition:z?"transform .3s":""};return $.value.name===m.CONTAIN.name&&(A.maxWidth=A.maxHeight="100%"),A}),X=h(()=>ce(i.zIndex)?i.zIndex:D());function T(){ne(),r("close")}function te(){const a=se(s=>{switch(s.code){case R.esc:i.closeOnPressEscape&&T();break;case R.space:Z();break;case R.left:q();break;case R.up:t("zoomIn");break;case R.right:J();break;case R.down:t("zoomOut");break}}),n=se(s=>{(s.wheelDelta?s.wheelDelta:-s.detail)>0?t("zoomIn",{zoomRate:1.2,enableTransition:!1}):t("zoomOut",{zoomRate:1.2,enableTransition:!1})});N.run(()=>{V(document,"keydown",a),V(document,C,n)})}function ne(){N.stop()}function U(){g.value=!1}function W(a){g.value=!1,a.target.alt=ee("el.image.error")}function G(a){if(g.value||a.button!==0||!p.value)return;o.value.enableTransition=!1;const{offsetX:n,offsetY:s}=o.value,w=a.pageX,z=a.pageY,y=se(A=>{o.value={...o.value,offsetX:n+A.pageX-w,offsetY:s+A.pageY-z}}),S=V(document,"mousemove",y);V(document,"mouseup",()=>{S()}),a.preventDefault()}function F(){o.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function Z(){if(g.value)return;const a=Fe(m),n=Object.values(m),s=$.value.name,z=(n.findIndex(y=>y.name===s)+1)%a.length;$.value=m[a[z]],F()}function P(a){const n=i.urlList.length;u.value=(a+n)%n}function q(){Y.value&&!i.infinite||P(u.value-1)}function J(){H.value&&!i.infinite||P(u.value+1)}function t(a,n={}){if(g.value)return;const{zoomRate:s,rotateDeg:w,enableTransition:z}={zoomRate:1.4,rotateDeg:90,enableTransition:!0,...n};switch(a){case"zoomOut":o.value.scale>.2&&(o.value.scale=Number.parseFloat((o.value.scale/s).toFixed(3)));break;case"zoomIn":o.value.scale<7&&(o.value.scale=Number.parseFloat((o.value.scale*s).toFixed(3)));break;case"clockwise":o.value.deg+=w;break;case"anticlockwise":o.value.deg-=w;break}o.value.enableTransition=z}return oe(j,()=>{ge(()=>{const a=L.value[0];a!=null&&a.complete||(g.value=!0)})}),oe(u,a=>{F(),r("switch",a)}),we(()=>{var a,n;te(),(n=(a=p.value)==null?void 0:a.focus)==null||n.call(a)}),_({setActiveItem:P}),(a,n)=>(k(),re(je,{to:"body",disabled:!a.teleported},[c(Be,{name:"viewer-fade",appear:""},{default:E(()=>[v("div",{ref_key:"wrapper",ref:p,tabindex:-1,class:d(e(l).e("wrapper")),style:ie({zIndex:e(X)})},[v("div",{class:d(e(l).e("mask")),onClick:n[0]||(n[0]=ze(s=>a.hideOnClickModal&&T(),["self"]))},null,2),I(" CLOSE "),v("span",{class:d([e(l).e("btn"),e(l).e("close")]),onClick:T},[c(e(x),null,{default:E(()=>[c(e(Se))]),_:1})],2),I(" ARROW "),e(B)?I("v-if",!0):(k(),O(ue,{key:0},[v("span",{class:d([e(l).e("btn"),e(l).e("prev"),e(l).is("disabled",!a.infinite&&e(Y))]),onClick:q},[c(e(x),null,{default:E(()=>[c(e(xe))]),_:1})],2),v("span",{class:d([e(l).e("btn"),e(l).e("next"),e(l).is("disabled",!a.infinite&&e(H))]),onClick:J},[c(e(x),null,{default:E(()=>[c(e(Oe))]),_:1})],2)],64)),I(" ACTIONS "),v("div",{class:d([e(l).e("btn"),e(l).e("actions")])},[v("div",{class:d(e(l).e("actions__inner"))},[c(e(x),{onClick:n[1]||(n[1]=s=>t("zoomOut"))},{default:E(()=>[c(e(Te))]),_:1}),c(e(x),{onClick:n[2]||(n[2]=s=>t("zoomIn"))},{default:E(()=>[c(e(Ne))]),_:1}),v("i",{class:d(e(l).e("actions__divider"))},null,2),c(e(x),{onClick:Z},{default:E(()=>[(k(),re($e(e($).icon)))]),_:1}),v("i",{class:d(e(l).e("actions__divider"))},null,2),c(e(x),{onClick:n[3]||(n[3]=s=>t("anticlockwise"))},{default:E(()=>[c(e(Ae))]),_:1}),c(e(x),{onClick:n[4]||(n[4]=s=>t("clockwise"))},{default:E(()=>[c(e(Re))]),_:1})],2)],2),I(" CANVAS "),v("div",{class:d(e(l).e("canvas"))},[(k(!0),O(ue,null,Me(a.urlList,(s,w)=>Ve((k(),O("img",{ref_for:!0,ref:z=>L.value[w]=z,key:s,src:s,style:ie(e(ae)),class:d(e(l).e("img")),onLoad:U,onError:W,onMousedown:G},null,46,aa)),[[De,w===u.value]])),128))],2),K(a.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var sa=ye(na,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const la=be(sa),oa=fe({hideOnClickModal:{type:Boolean,default:!1},src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:{type:Boolean,default:!1},scrollContainer:{type:le([String,Object])},previewSrcList:{type:le(Array),default:()=>ve([])},previewTeleported:{type:Boolean,default:!1},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0}}),ra={load:f=>f instanceof Event,error:f=>f instanceof Event,switch:f=>ce(f),close:()=>!0,show:()=>!0},ia=["src","loading"],ua={key:0},ca=Q({name:"ElImage",inheritAttrs:!1}),da=Q({...ca,props:oa,emits:ra,setup(f,{emit:_}){const r=f;let i="";const{t:m}=me(),C=pe("image"),ee=Pe(),l=Ye(),D=b(),p=b(!1),L=b(!0),N=b(!1),g=b(),u=b(),$=M&&"loading"in HTMLImageElement.prototype;let o,B;const Y=h(()=>ee.style),H=h(()=>{const{fit:t}=r;return M&&t?{objectFit:t}:{}}),j=h(()=>{const{previewSrcList:t}=r;return Array.isArray(t)&&t.length>0}),ae=h(()=>{const{previewSrcList:t,initialIndex:a}=r;let n=a;return a>t.length-1&&(n=0),n}),X=h(()=>r.loading==="eager"?!1:!$&&r.loading==="lazy"||r.lazy),T=()=>{!M||(L.value=!0,p.value=!1,D.value=r.src)};function te(t){L.value=!1,p.value=!1,_("load",t)}function ne(t){L.value=!1,p.value=!0,_("error",t)}function U(){Ze(g.value,u.value)&&(T(),F())}const W=qe(U,200);async function G(){var t;if(!M)return;await ge();const{scrollContainer:a}=r;Ue(a)?u.value=a:We(a)&&a!==""?u.value=(t=document.querySelector(a))!=null?t:void 0:g.value&&(u.value=Ge(g.value)),u.value&&(o=V(u,"scroll",W),setTimeout(()=>U(),100))}function F(){!M||!u.value||!W||(o==null||o(),u.value=void 0)}function Z(t){if(!!t.ctrlKey){if(t.deltaY<0)return t.preventDefault(),!1;if(t.deltaY>0)return t.preventDefault(),!1}}function P(){!j.value||(B=V("wheel",Z,{passive:!1}),i=document.body.style.overflow,document.body.style.overflow="hidden",N.value=!0,_("show"))}function q(){B==null||B(),document.body.style.overflow=i,N.value=!1,_("close")}function J(t){_("switch",t)}return oe(()=>r.src,()=>{X.value?(L.value=!0,p.value=!1,F(),G()):T()}),we(()=>{X.value?G():T()}),(t,a)=>(k(),O("div",{ref_key:"container",ref:g,class:d([e(C).b(),t.$attrs.class]),style:ie(e(Y))},[D.value!==void 0&&!p.value?(k(),O("img",He({key:0},e(l),{src:D.value,loading:t.loading,style:e(H),class:[e(C).e("inner"),e(j)&&e(C).e("preview"),L.value&&e(C).is("loading")],onClick:P,onLoad:te,onError:ne}),null,16,ia)):I("v-if",!0),L.value||p.value?(k(),O("div",{key:1,class:d(e(C).e("wrapper"))},[L.value?K(t.$slots,"placeholder",{key:0},()=>[v("div",{class:d(e(C).e("placeholder"))},null,2)]):p.value?K(t.$slots,"error",{key:1},()=>[v("div",{class:d(e(C).e("error"))},Xe(e(m)("el.image.error")),3)]):I("v-if",!0)],2)):I("v-if",!0),e(j)?(k(),O(ue,{key:2},[N.value?(k(),re(e(la),{key:0,"z-index":t.zIndex,"initial-index":e(ae),infinite:t.infinite,"url-list":t.previewSrcList,"hide-on-click-modal":t.hideOnClickModal,teleported:t.previewTeleported,"close-on-press-escape":t.closeOnPressEscape,onClose:q,onSwitch:J},{default:E(()=>[t.$slots.viewer?(k(),O("div",ua,[K(t.$slots,"viewer")])):I("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):I("v-if",!0)],64)):I("v-if",!0)],6))}});var fa=ye(da,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const ma=be(fa);const pa=""+new URL("../jpg/test1-f35ba08b.jpg",import.meta.url).href,ga=""+new URL("../jpg/test2-746be997.jpg",import.meta.url).href,wa=""+new URL("../jpg/test3-3c31bc92.jpg",import.meta.url).href;export{ma as E,ga as a,wa as b,pa as t};
